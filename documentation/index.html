<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
    <title>Hikingmap</title>
    <link rel="stylesheet" type="text/css" href="hikingmap.css" />
</head>
<body>
    <div class="maincontent">
    <h1>Hikingmap</h1>

    <h2>Introduction</h2>
    This document describes how to use the hikingmap application. The script takes one or more GPS tracks as input and will try to calculate the minimum amount of pages needed to print the complete track, choosing between portrait and landscape on the fly. The actual rendering of the maps will be done by an external script.

    <h2>Disclaimer</h2>
The scripts in this document are written and verified to work in a Linux environment. There is no reason it shouldn't work on Windows, Mac OS or other operating systems, but it might require additional steps or a slightly different approach. If you have any questions or feedback, you are welcome to contact me on roel.derickx --at-- gmail.

    <h2 id="toc">Table of contents</h2>
    <ol class="toc">
    <li class="toc"><a href="#download">Download</a></li>
    <li class="toc"><a href="#render">Rendering</a>
        <ol class="toc">
        <li class="toc"><a href="#renderchoice">Renderer projects</a></li>
        <li class="toc"><a href="#renderwrite">Writing your own renderer</a></li>
        </ol>
    </li>
    <li class="toc"><a href="#hikingmap">Hikingmap</a>
        <ol class="toc">
        <li class="toc"><a href="#hmusage">Usage</a></li>
        <li class="toc"><a href="#hmresults">Results</a></li>
        <li class="toc"><a href="#hmroadmap">Roadmap</a></li>
        </ol>
    </li>
    </ol>
    
    <h2 id="download">Download</h2>
    You can find the hikingmap package <a href="https://github.com/roelderickx/hikingmap">on github</a>, to run the scripts you need a working installation of <a href="https://www.python.org/">Python</a>.
    
    <p><a href="#toc">Return to table of contents</a></p>

    <h2 id="render">Rendering</h2>
    Hikingmap will only calculate the page boundaries, the actual rendering will be done by an external render script. You can either choose one from the list below or write your own.
    
    <h3 id="renderchoice">Renderer projects</h3>
    <ul>
    <li>render-mapnik: this is the default renderer used by hikingmap. All map data will be stored offline and elevation lines are supported, however the <a href="render_mapnik.html">setup</a> is rather difficult.</li>
    <li><a href="https://github.com/roelderickx/render-tiles">render-tiles</a>: this is an alternative renderer which was initially written to be used with <a href="https://wiki.openstreetmap.org/wiki/MBTiles">MBTiles files</a>, but it can be configured to use a web based tile server as well. Please consult the documentation on the project page before use.</li>
    </ul>
    
    <h3 id="renderwrite">Writing your own renderer</h3>
    All you have to do to write your own renderer is to create a directory with a render.py script inside. Hikingmap passes certain parameters, you are free to use or ignore them as you wish. A good start is the dummy renderer included in the hikingmap package, it contains already a class for parsing all parameters.
    <table border="0">
    <tr>
        <td>-o</td>
        <td>Minimum longitude of the area boundaries</td>
    </tr>
    <tr>
        <td>-O</td>
        <td>Maximum longitude of the area boundaries</td>
    </tr>
    <tr>
        <td>-a</td>
        <td>Minimum latitude of the area boundaries</td>
    </tr>
    <tr>
        <td>-A</td>
        <td>Maximum latitude of the area boundaries</td>
    </tr>
    <tr>
        <td>-w</td>
        <td>Page width in cm</td>
    </tr>
    <tr>
        <td>-h</td>
        <td>Page height in cm</td>
    </tr>
    <tr>
        <td>-t</td>
        <td>Temp track file to render. This is used to draw the page boundaries of the overview map, hikingmap will save those as a temporary GPX file.</td>
    </tr>
    <tr>
        <td>-y</td>
        <td>Temp waypoints file to render. This is used to render the distance each kilometer or mile, hikingmap will save those waypoints as a temporary GPX file.</td>
    </tr>
    <tr>
        <td>-v, --verbose</td>
        <td>Display extra information while processing.</td>
    </tr>
    <tr>
        <td>-h, --help</td>
        <td>Display help</td>
    </tr>
    <tr>
        <td>gpxfiles</td>
        <td>The GPX track(s) to render.</td>
    </tr>
    </table>

    
    <p><a href="#toc">Return to table of contents</a></p>
    
    <h2 id="hikingmap">Hikingmap</h2>

    <h3 id="hmusage">Usage</h3>
    <code>hikingmap.py [OPTION]... gpxfiles...</code>
    Options:
    <table border="0">
    <tr>
        <td>-s</td>
        <td>--scale</td>
        <td>The scale denominator</td>
    </tr>
    <tr>
        <td></td>
        <td>--pagewidth</td>
        <td>The width of the resulting map in portrait orientation. The application will automatically use pageheight when rendering in landscape orientation. The value should be the width of the desired papersize minus the horizontal margins on both sides.</td>
    </tr>
    <tr>
        <td></td>
        <td>--pageheight</td>
        <td>The height of the resulting map in portrait orientation. The application will automatically use pagewidth when rendering in landscape orientation. The value should be the height of the desired papersize minus the vertical margins on both sides.</td>
    </tr>
    <tr>
        <td></td>
        <td>--pageoverlap</td>
        <td>The amount of overlap between two consecutive pages, in cm.</td>
    </tr>
    <tr>
        <td></td>
        <td>--overview</td>
        <td>Generate overview map.</td>
    </tr>
    <tr>
        <td>-w</td>
        <td>--waypoints</td>
        <td>If this parameter is given the cumulative distance from the origin will be rendered each N kilometers or miles.</td>
    </tr>
    <tr>
        <td>-u</td>
        <td>--unit</td>
        <td>Length unit in which the value of the waypoints parameter is expressed. Possible values are km or mi.</td>
    </tr>
    <tr>
        <td>-o</td>
        <td>--page-order</td>
        <td>Order in which pages are generated. Possible values are naturalorder, rectoverso or book.</td>
    </tr>
    <tr>
        <td>-b</td>
        <td>--basename</td>
        <td>Output filename base. All output file names will start with this parameter, followed by a sequence number and a file extension depending on the specified format.</td>
    </tr>
    <tr>
        <td>-r</td>
        <td>--renderdir</td>
        <td>Directory containing the renderscript.</td>
    </tr>
    <tr>
        <td>-v</td>
        <td>--verbose</td>
        <td>Display extra information while processing.</td>
    </tr>
    <tr>
        <td>-h</td>
        <td>--help</td>
        <td>Display help</td>
    </tr>
    <tr>
        <td colspan="2">gpxfiles</td>
        <td>The GPX track(s) to follow. More than one GPX file can be given, the script will render all tracks given.</td>
    </tr>
    </table>
    The hikingmap script will try to render the complete track on a minimum of pages. Because it is particularly hard for an algorithm to decide what should be on the map and what shouldn't, the following rules are implemented:
    <ul>
    <li>All tracks will be scanned and consecutive tracks will automatically be combined into a single track</li>
    <li>The tracks will be rendered in the given order. The script tries to center the track as much as possible and decides whether to use portrait or landscape to optimize paper usage</li>
    <li>If a track is finished and remaining tracks are to be rendered, only the parts which are not yet rendered will be processed. This might be only a part of the track, and only this part will be centered</li>
    </ul>
    
    <h3 id="hmresults">Results</h3>
    Below you can find part of a rendered track. The maps were rendered on a 1:50000 scale for A4 paper size. The resulting PDF files were converted to PNG and subsequently scaled down to save bandwith, they are included here only as an example to show how the track is rendered and how pages fit together. Click on the image for a larger view.
    <p><a href="render-example.png"><img src="render-example-thumb.png"/></a></p>
    
    <h3 id="hmroadmap">Roadmap</h3>
    <ul>
    <li>Currently the track is centered on a page, either horizontally in case of portrait or vertically in case of landscape orientation. However, side tracks can fall outside the boundaries of the page because of this. The centering should be made more intelligent to maximize the amount of tracks on the page</li>
    </ul>
    
    <p><a href="#toc">Return to table of contents</a></p>

    <h2></h2>
    
    <a class="copyright" rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/4.0/88x31.png" /></a><br /><span xmlns:dct="http://purl.org/dc/terms/" href="http://purl.org/dc/dcmitype/Text" property="dct:title" rel="dct:type">This page</span> is licensed under a <a class="copyright" rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International License</a>.
    <p>This page was last updated on october 11, 2019</p>
    </article>
</body>
</html>

